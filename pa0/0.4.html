
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>0.4 Installing More Tools · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-panel/icons.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-panel/panel.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="0.5.html" />
    
    
    <link rel="prev" href="0.3.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    课程设计介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../read-before-starting.html">
            
                <a href="../read-before-starting.html">
            
                    
                    实验前必读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="./">
            
                <a href="./">
            
                    
                    PA0 - 开发环境配置
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="0.1.html">
            
                <a href="0.1.html">
            
                    
                    0.1 Installing a GNU/Linux VM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="0.2.html">
            
                <a href="0.2.html">
            
                    
                    0.2 First Step into Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="0.3.html">
            
                <a href="0.3.html">
            
                    
                    0.3 Installing Basic Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.4" data-path="0.4.html">
            
                <a href="0.4.html">
            
                    
                    0.4 Installing More Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="0.5.html">
            
                <a href="0.5.html">
            
                    
                    0.5 More Exploration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="0.6.html">
            
                <a href="0.6.html">
            
                    
                    0.6 Logging in and Transferring Files via SSH
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="0.7.html">
            
                <a href="0.7.html">
            
                    
                    0.7 Acquiring Source Code for PAs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../pa1/">
            
                <a href="../pa1/">
            
                    
                    PA1 - 最简单的计算机
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../pa1/1.1.html">
            
                <a href="../pa1/1.1.html">
            
                    
                    1.1 简易调试器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../pa1/1.2.html">
            
                <a href="../pa1/1.2.html">
            
                    
                    1.2 表达式求值
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../pa1/1.3.html">
            
                <a href="../pa1/1.3.html">
            
                    
                    1.3 监视点
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../pa2/">
            
                <a href="../pa2/">
            
                    
                    PA2 - 冯诺依曼计算机
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../pa2/2.1.html">
            
                <a href="../pa2/2.1.html">
            
                    
                    2.1 第一个程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../pa2/2.2.html">
            
                <a href="../pa2/2.2.html">
            
                    
                    2.2 基本指令集
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../pa2/2.3.html">
            
                <a href="../pa2/2.3.html">
            
                    
                    2.3 输入输出
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../pa3/">
            
                <a href="../pa3/">
            
                    
                    PA3 - 异常和分页
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../pa3/3.1.html">
            
                <a href="../pa3/3.1.html">
            
                    
                    3.1 异常控制流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../pa3/3.2.html">
            
                <a href="../pa3/3.2.html">
            
                    
                    3.2 虚拟地址空间
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../pa4/">
            
                <a href="../pa4/">
            
                    
                    PA4 - 分时多任务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../pa4/4.1.html">
            
                <a href="../pa4/4.1.html">
            
                    
                    4.1 上下文切换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../pa4/4.2.html">
            
                <a href="../pa4/4.2.html">
            
                    
                    4.2 时钟中断
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../lab3.html">
            
                <a href="../lab3.html">
            
                    
                    Lab3 - Cachesim
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../others/">
            
                <a href="../others/">
            
                    
                    杂项
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../others/submit-requirement.html">
            
                <a href="../others/submit-requirement.html">
            
                    
                    实验提交要求
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../others/git-manual.html">
            
                <a href="../others/git-manual.html">
            
                    
                    Git 入门教程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../others/linux-manual.html">
            
                <a href="../others/linux-manual.html">
            
                    
                    Linux 入门教程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../others/man-manual.html">
            
                <a href="../others/man-manual.html">
            
                    
                    Man 入门教程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../others/markdown-manual.html">
            
                <a href="../others/markdown-manual.html">
            
                    
                    Markdown 入门教程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="../others/instruction-example.html">
            
                <a href="../others/instruction-example.html">
            
                    
                    指令执行示例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="../others/how-to-read-i386.html">
            
                <a href="../others/how-to-read-i386.html">
            
                    
                    i386 手册阅读指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="../others/i386-typo.html">
            
                <a href="../others/i386-typo.html">
            
                    
                    i386 手册勘误
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="../others/software-suggest.html">
            
                <a href="../others/software-suggest.html">
            
                    
                    软件推荐
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >0.4 Installing More Tools</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="installing-more-tools">Installing More Tools</h1>
<p><div class="panel panel-info"><div class="panel-heading"><div class="panel-icon"><i class="icon-info"></i></div><div class="panel-title">What you should do in this section</div></div><div class="panel-content"><ol>
<li>Read the whole text carefully.</li>
<li>Try the commands of Linux mentioned.</li>
<li>Configure the network <em>if your VM cannot access to the Internet</em>.</li>
<li>Add apt sources to acquire a faster installation.</li>
<li>Install all tools mentioned.</li>
<li>Answer all the questions given in the quoting part.</li>
</ol>
</div></div></p>
<h2 id="configuring-the-network">Configuring the Network</h2>
<p>We executed an installation without network, which make it unable to acquire network address by operating system itself so we configure it manually. If your VM can connect to the Internet correctly, you can skip this and navigate to <em>Adding APT sources</em> in this section.</p>
<h3 id="configuring-vm-settings">Configuring VM settings</h3>
<p>Before booting the VM, we configure the VM itself firstly.</p>
<ol>
<li><p>Make sure your VM is not running, select the VM you created in the sidebar and click <code>Settings</code>.</p>
</li>
<li><p>Click <code>Network</code> in the sidebar.</p>
</li>
<li><p>Make sure <code>Enable Network Adapter</code> in <code>Adapter 1</code> is checked and configure <code>Attached to</code> as <code>Nat</code>.</p>
</li>
<li><p>The <code>Name</code> field will be enabled and what you should do is select the network device (wireless or wired network adapter) you are using.</p>
</li>
<li><p>Click <code>Advanced</code> .</p>
</li>
<li><p>Click <code>Port Forwarding</code> .</p>
</li>
<li><p>Click the green &#x2795; in the right sidebar&#xFF0C;make sure the <code>Host Port</code> and <code>Guest Port</code> is <code>22</code> .</p>
</li>
<li><p>Click <code>OK</code> to save the <code>Port Forwarding</code>.</p>
</li>
<li><p>Click <code>OK</code> to save the settings.</p>
</li>
</ol>
<h3 id="configuring-os-settings">Configuring OS Settings</h3>
<p>Now start your VM and login as normal user. Check the network with command below:</p>
<pre><code class="lang-bash">ping 114.114.114.114 -c 4
</code></pre>
<p>In most of circumstances, you will receive a message telling you that:</p>
<pre><code class="lang-bash">connect: Network is unreachable
</code></pre>
<p>and this means we should also configure the settings of Debian manually.</p>
<p>Execute command</p>
<pre><code class="lang-bash">ip addr
</code></pre>
<p>and you will see all network adapters in your VM. By default, the first interface is <code>lo</code> which represents the loopback network and what we should focus on is the second one:</p>
<pre><code>2: enp0s3: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000
    link/ether 08:00:27:a4:55:95 brd ff:ff:ff:ff:ff:ff
</code></pre><p><em>If you have only the <code>lo</code> interface, that means you don&apos;t turn on the <code>Adapter 1</code> in the settings of VM properly.</em></p>
<p>The message you can see might be different, but we just focus on the name of the interface. In this example, it is <code>enp0s3</code> and you can treat it as the name of the adapter, please remember the one you see and we will use it later.</p>
<p>Type commands below to modify the settings of interfaces, you don&apos;t need to type strings following <code>#</code> which mean comments but not parts of a command.</p>
<pre><code class="lang-bash"><span class="hljs-built_in">cd</span> /etc/network/
sudo cp interfaces interfaces.bak <span class="hljs-comment"># make a backup of the setting file</span>
sudo vim interfaces
</code></pre>
<p>and then modify the opened file as described below (<strong>NOT COPY AND PASTE DIRECTLY</strong>). We call this format below <strong><a href="https://en.wikipedia.org/wiki/Diff" target="_blank">diff format</a></strong> and you can also search the Internet to learn more about it.</p>
<pre><code class="lang-diff"><span class="hljs-comment">--- before modification</span>
<span class="hljs-comment">+++ after modification</span>
@@ -?,3 +?,6 @@
 # The loopback network interface
 auto lo
 iface lo inet loopback
<span class="hljs-addition">+</span>
<span class="hljs-addition">+auto enp0s3</span>
<span class="hljs-addition">+iface enp0s3 inet dhcp</span>
</code></pre>
<p>but please replace <code>enp0s3</code> with your own name of interface which might be different. Save the file and execute</p>
<pre><code class="lang-bash">sudo service networking restart
</code></pre>
<p>and wait a minute. When this command is executed correctly, you can execute</p>
<pre><code class="lang-bash">ip addr
</code></pre>
<p>again and you will find that the interface <code>enp0s3</code> is allocated with an IP address which usually looks like <code>192.168.x.x</code> or something but if you can access to the Internet, it makes no difference.</p>
<p>Now we let&apos;s check if the network working normally by </p>
<pre><code class="lang-bash">ping www.baidu.com -c 4
</code></pre>
<p>and if you see message below, it means your network is running correctly:</p>
<pre><code>PING www.a.shifen.com (180.97.33.107) 56(84) bytes of data.
64 bytes from 180.97.33.107 (180.97.33.107): icmp_seq=1 ttl=55 time=37.1 ms
64 bytes from 180.97.33.107 (180.97.33.107): icmp_seq=2 ttl=55 time=37.7 ms
64 bytes from 180.97.33.107 (180.97.33.107): icmp_seq=3 ttl=55 time=37.7 ms
64 bytes from 180.97.33.107 (180.97.33.107): icmp_seq=4 ttl=55 time=37.5 ms

--- www.a.shifen.com ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 17063ms
rtt min/avg/max/mdev = 37.183/37.557/37.762/0.302 ms
</code></pre><h2 id="adding-apt-sources">Adding APT sources</h2>
<p>Because of the network environment, we should replace the original ones with others in the mainland of China, so you should perform modification below:</p>
<pre><code class="lang-bash"><span class="hljs-built_in">cd</span> /etc/apt/                          <span class="hljs-comment"># change to the directory setting file exists</span>
sudo cp sources.list sources.list.bak <span class="hljs-comment"># make a backup of the setting file</span>
sudo vim sources.list
</code></pre>
<p>What you should do is to <strong>comment out each line existing now</strong> with a <code>#</code> symbol at the start of this line like:</p>
<pre><code># deb cdrom:[Debian GNU/Linux 9.6.0 _Stretch_ - Official i386 NETINST 20181110-12:18]/ stretch main
# something...
# something...
# ...
</code></pre><p>and then append lines below at the end of the file, <strong>please make sure you don&apos;t type any letter with the wrong one</strong>:</p>
<pre><code>deb http://mirrors.aliyun.com/debian/ buster main non-free contrib
deb-src http://mirrors.aliyun.com/debian/ buster main non-free contrib
deb http://mirrors.aliyun.com/debian-security buster/updates main
deb-src http://mirrors.aliyun.com/debian-security buster/updates main
deb http://mirrors.aliyun.com/debian/ buster-updates main non-free contrib
deb-src http://mirrors.aliyun.com/debian/ buster-updates main non-free contrib
deb http://mirrors.aliyun.com/debian/ buster-backports main non-free contrib
deb-src http://mirrors.aliyun.com/debian/ buster-backports main non-free contrib
</code></pre><p>make sure you didn&apos;t type anything wrong and save it by <code>&lt;Esc&gt;:wq</code> to save and exit vim.</p>
<p>Now update the apt source by</p>
<pre><code class="lang-bash">sudo apt update
sudo apt upgrade -y
</code></pre>
<p>This command requires root permission, too. And it requires Internet accessing. It costs some time for this command to finish. If some errors are reported, please check</p>
<ul>
<li>whether there are any typos in <code>sources.list</code>, and</li>
<li>whether your host is able to access the Internet.</li>
</ul>
<h2 id="installing-tools-for-pas">Installing tools for PAs</h2>
<p>The following tools are necessary for PAs, and you don&apos;t need to type the comment part:</p>
<pre><code class="lang-bash">sudo apt install man                <span class="hljs-comment"># online reference manuals</span>
sudo apt install build-essential    <span class="hljs-comment"># build-essential packages, include binary utilities, gcc, make, and so on</span>
sudo apt install gcc-doc            <span class="hljs-comment"># GCC document</span>
sudo apt install gdb                <span class="hljs-comment"># GNU debugger</span>
sudo apt install git                <span class="hljs-comment"># reversion control system</span>
sudo apt install gcc-multilib       <span class="hljs-comment"># a library to use compile the project later</span>
sudo apt install libreadline-dev    <span class="hljs-comment"># a library to use compile the project later</span>
sudo apt install libsdl2-dev        <span class="hljs-comment"># a library to use compile the project later</span>
sudo apt install qemu-system-x86    <span class="hljs-comment"># QEMU</span>
</code></pre>
<p>If you want do install them quickly, you can use:</p>
<pre><code class="lang-bash">sudo apt install man build-essential gcc-doc gdb git gcc-multilib libreadline-dev libsdl2-dev qemu-system-x86 -y
</code></pre>
<p>to install all of them.</p>
<p>Tools installed above will be discussed in the next section.</p>
<hr>
<p><em>That&apos;s everything in PA0.4.</em></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="0.3.html" class="navigation navigation-prev " aria-label="Previous page: 0.3 Installing Basic Tools">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="0.5.html" class="navigation navigation-next " aria-label="Next page: 0.5 More Exploration">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"0.4 Installing More Tools","level":"1.3.4","depth":2,"next":{"title":"0.5 More Exploration","level":"1.3.5","depth":2,"path":"pa0/0.5.md","ref":"pa0/0.5.md","articles":[]},"previous":{"title":"0.3 Installing Basic Tools","level":"1.3.3","depth":2,"path":"pa0/0.3.md","ref":"pa0/0.3.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["panel","-sharing"],"pluginsConfig":{"panel":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"pa0/0.4.md","mtime":"2020-04-24T06:43:52.690Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-04-24T06:44:42.121Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

